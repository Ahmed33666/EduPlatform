<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NOIR ‚Äî Fashion Store</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
:root{
  --black:#0a0a0a;--white:#fafafa;--cream:#f5f0eb;--gold:#c9a96e;--gold2:#e8c98a;
  --gray:#888;--lgray:#ddd;--red:#c0392b;--green:#27ae60;
  --font-display:'Cormorant Garamond',serif;
  --font-body:'DM Sans',sans-serif;
}
body{background:var(--white);color:var(--black);font-family:var(--font-body);overflow-x:hidden;}
.hidden{display:none!important;}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:6px;}
::-webkit-scrollbar-track{background:var(--cream);}
::-webkit-scrollbar-thumb{background:var(--gold);border-radius:3px;}

/* ===== TOAST ===== */
.toast{position:fixed;bottom:30px;right:30px;background:var(--black);color:var(--white);
  padding:14px 22px;border-radius:2px;font-size:.85rem;z-index:9999;
  opacity:0;transform:translateY(10px);transition:all .3s;pointer-events:none;
  border-left:3px solid var(--gold);}
.toast.show{opacity:1;transform:translateY(0);}

/* ===== LOADER ===== */
.loader{position:fixed;inset:0;background:var(--black);z-index:10000;
  display:flex;align-items:center;justify-content:center;transition:opacity .5s;}
.loader.gone{opacity:0;pointer-events:none;}
.loader-text{font-family:var(--font-display);font-size:3rem;color:var(--gold);letter-spacing:8px;
  animation:pulse 1.5s ease-in-out infinite;}
@keyframes pulse{0%,100%{opacity:.3}50%{opacity:1}}

/* ===== NAVBAR ===== */
header{position:fixed;top:0;width:100%;z-index:500;background:rgba(250,250,250,.95);
  backdrop-filter:blur(10px);border-bottom:1px solid rgba(0,0,0,.08);transition:all .3s;}
header.dark{background:rgba(10,10,10,.97);border-bottom-color:rgba(255,255,255,.08);}
.nav-inner{max-width:1400px;margin:0 auto;padding:0 40px;height:70px;
  display:flex;align-items:center;justify-content:space-between;}
.nav-logo{font-family:var(--font-display);font-size:1.8rem;font-weight:300;letter-spacing:6px;
  cursor:pointer;transition:color .3s;}
header.dark .nav-logo{color:var(--white);}
.nav-links{display:flex;gap:32px;list-style:none;}
.nav-links a{font-size:.8rem;letter-spacing:2px;text-transform:uppercase;
  color:var(--black);text-decoration:none;cursor:pointer;position:relative;transition:color .3s;}
header.dark .nav-links a{color:var(--lgray);}
.nav-links a::after{content:'';position:absolute;bottom:-2px;left:0;width:0;height:1px;
  background:var(--gold);transition:width .3s;}
.nav-links a:hover::after{width:100%;}
.nav-icons{display:flex;align-items:center;gap:20px;}
.nav-icon{cursor:pointer;font-size:1.1rem;position:relative;transition:transform .2s;}
.nav-icon:hover{transform:scale(1.1);}
header.dark .nav-icon{color:var(--white);}
.cart-badge{position:absolute;top:-8px;right:-8px;background:var(--gold);color:var(--black);
  width:18px;height:18px;border-radius:50%;font-size:.65rem;font-weight:500;
  display:flex;align-items:center;justify-content:center;}
.nav-user-btn{font-size:.75rem;letter-spacing:1.5px;text-transform:uppercase;
  padding:8px 20px;border:1px solid currentColor;background:none;cursor:pointer;
  transition:all .3s;font-family:var(--font-body);}
.nav-user-btn:hover{background:var(--black);color:var(--white);}
header.dark .nav-user-btn{color:var(--white);}
header.dark .nav-user-btn:hover{background:var(--white);color:var(--black);}

/* ===== PAGES ===== */
.page{min-height:100vh;padding-top:70px;}

/* ===== AUTH ===== */
#page-auth{background:var(--cream);display:flex;align-items:center;justify-content:center;min-height:100vh;}
.auth-split{display:grid;grid-template-columns:1fr 1fr;max-width:900px;width:90%;
  box-shadow:0 40px 80px rgba(0,0,0,.15);border-radius:2px;overflow:hidden;}
.auth-visual{background:var(--black);padding:60px;display:flex;flex-direction:column;justify-content:space-between;}
.auth-visual-logo{font-family:var(--font-display);font-size:2.5rem;color:var(--gold);letter-spacing:6px;}
.auth-visual-quote{font-family:var(--font-display);font-style:italic;font-size:1.4rem;
  color:rgba(255,255,255,.7);line-height:1.6;}
.auth-visual-tag{font-size:.7rem;letter-spacing:3px;text-transform:uppercase;color:var(--gold);opacity:.7;}
.auth-form-side{background:var(--white);padding:60px 50px;}
.auth-tabs{display:flex;gap:0;margin-bottom:36px;border-bottom:1px solid var(--lgray);}
.auth-tab{font-size:.8rem;letter-spacing:2px;text-transform:uppercase;padding:10px 20px 14px;
  cursor:pointer;position:relative;color:var(--gray);background:none;border:none;font-family:var(--font-body);}
.auth-tab.active{color:var(--black);}
.auth-tab.active::after{content:'';position:absolute;bottom:-1px;left:0;width:100%;height:2px;background:var(--gold);}
.form-group{margin-bottom:18px;}
.form-group label{display:block;font-size:.72rem;letter-spacing:1.5px;text-transform:uppercase;
  color:var(--gray);margin-bottom:8px;}
.form-group input,.form-group select{width:100%;border:1px solid var(--lgray);background:var(--cream);
  padding:13px 16px;font-size:.9rem;font-family:var(--font-body);outline:none;
  transition:border .2s;border-radius:1px;}
.form-group input:focus,.form-group select:focus{border-color:var(--gold);}
.btn-primary{width:100%;background:var(--black);color:var(--white);border:none;
  padding:15px;font-size:.8rem;letter-spacing:2px;text-transform:uppercase;
  cursor:pointer;transition:all .3s;font-family:var(--font-body);margin-top:8px;}
.btn-primary:hover{background:var(--gold);color:var(--black);}
.auth-msg{font-size:.8rem;color:var(--red);margin-bottom:12px;display:none;}
.auth-msg.show{display:block;}
.auth-success{color:var(--green);}

/* ===== HERO ===== */
.hero{height:100vh;position:relative;overflow:hidden;cursor:pointer;}
.hero-bg{position:absolute;inset:0;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 40%,#0f3460 100%);}
.hero-overlay{position:absolute;inset:0;background:rgba(0,0,0,.3);}
.hero-content{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;
  align-items:center;justify-content:center;text-align:center;color:var(--white);padding:40px;}
.hero-eyebrow{font-size:.7rem;letter-spacing:5px;text-transform:uppercase;color:var(--gold);
  margin-bottom:24px;opacity:0;animation:fadeUp .8s .2s forwards;}
.hero-title{font-family:var(--font-display);font-size:clamp(4rem,10vw,8rem);font-weight:300;
  line-height:.95;margin-bottom:24px;opacity:0;animation:fadeUp .8s .4s forwards;}
.hero-title em{font-style:italic;color:var(--gold);}
.hero-sub{font-size:1rem;color:rgba(255,255,255,.7);margin-bottom:40px;
  opacity:0;animation:fadeUp .8s .6s forwards;}
.hero-btns{display:flex;gap:16px;opacity:0;animation:fadeUp .8s .8s forwards;}
.btn-outline-white{border:1px solid white;background:none;color:white;padding:14px 36px;
  font-size:.75rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;
  transition:all .3s;font-family:var(--font-body);}
.btn-outline-white:hover{background:white;color:black;}
.btn-gold{border:none;background:var(--gold);color:var(--black);padding:14px 36px;
  font-size:.75rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;
  transition:all .3s;font-family:var(--font-body);}
.btn-gold:hover{background:var(--gold2);}
.hero-scroll{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);
  font-size:.65rem;letter-spacing:3px;text-transform:uppercase;color:rgba(255,255,255,.5);
  display:flex;flex-direction:column;align-items:center;gap:8px;animation:bounce 2s infinite;}
.hero-scroll-line{width:1px;height:40px;background:linear-gradient(to bottom,rgba(255,255,255,.5),transparent);}
@keyframes bounce{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(-6px)}}

/* ===== CATEGORIES ===== */
.categories{padding:80px 40px;max-width:1400px;margin:0 auto;}
.section-header{text-align:center;margin-bottom:60px;}
.section-label{font-size:.7rem;letter-spacing:4px;text-transform:uppercase;color:var(--gold);margin-bottom:12px;}
.section-title{font-family:var(--font-display);font-size:clamp(2rem,4vw,3rem);font-weight:300;}
.cat-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;}
.cat-card{position:relative;aspect-ratio:3/4;overflow:hidden;cursor:pointer;border-radius:1px;}
.cat-card img{width:100%;height:100%;object-fit:cover;transition:transform .6s;}
.cat-card:hover img{transform:scale(1.05);}
.cat-card-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.7) 0%,transparent 50%);}
.cat-card-label{position:absolute;bottom:24px;left:24px;color:white;}
.cat-card-label h3{font-family:var(--font-display);font-size:1.4rem;font-weight:300;margin-bottom:4px;}
.cat-card-label span{font-size:.7rem;letter-spacing:2px;text-transform:uppercase;color:var(--gold);}

/* ===== PRODUCTS ===== */
#page-shop{padding-top:70px;}
.shop-layout{display:grid;grid-template-columns:260px 1fr;max-width:1400px;margin:0 auto;
  padding:40px;gap:40px;}
.filter-sidebar{position:sticky;top:90px;height:fit-content;}
.filter-title{font-family:var(--font-display);font-size:1.4rem;font-weight:300;margin-bottom:28px;}
.filter-group{margin-bottom:28px;padding-bottom:28px;border-bottom:1px solid var(--lgray);}
.filter-group-title{font-size:.7rem;letter-spacing:2px;text-transform:uppercase;
  color:var(--gray);margin-bottom:14px;}
.filter-options{display:flex;flex-direction:column;gap:10px;}
.filter-option{display:flex;align-items:center;gap:10px;cursor:pointer;font-size:.85rem;}
.filter-option input{accent-color:var(--gold);}
.price-range{display:flex;gap:8px;}
.price-range input{width:80px;border:1px solid var(--lgray);padding:8px;font-size:.8rem;
  font-family:var(--font-body);outline:none;}
.price-range input:focus{border-color:var(--gold);}
.search-bar{display:flex;gap:0;margin-bottom:30px;}
.search-bar input{flex:1;border:1px solid var(--lgray);border-right:none;padding:12px 16px;
  font-size:.9rem;font-family:var(--font-body);outline:none;}
.search-bar input:focus{border-color:var(--gold);}
.search-bar button{border:1px solid var(--lgray);background:var(--black);color:white;
  padding:12px 20px;cursor:pointer;font-size:.9rem;transition:background .2s;}
.search-bar button:hover{background:var(--gold);color:var(--black);}
.shop-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;}
.shop-count{font-size:.8rem;color:var(--gray);letter-spacing:1px;}
.sort-select{border:1px solid var(--lgray);padding:8px 14px;font-size:.8rem;
  font-family:var(--font-body);outline:none;background:white;cursor:pointer;}
.products-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:24px;}
.product-card{cursor:pointer;position:relative;group;}
.product-img-wrap{position:relative;aspect-ratio:3/4;overflow:hidden;background:var(--cream);margin-bottom:14px;}
.product-img-wrap img{width:100%;height:100%;object-fit:cover;transition:transform .5s;}
.product-card:hover .product-img-wrap img{transform:scale(1.04);}
.product-badge{position:absolute;top:12px;left:12px;background:var(--black);color:white;
  font-size:.65rem;letter-spacing:1.5px;text-transform:uppercase;padding:4px 10px;}
.product-badge.sale{background:var(--red);}
.product-badge.new{background:var(--gold);color:var(--black);}
.product-actions{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,.85);
  padding:14px;display:flex;gap:8px;transform:translateY(100%);transition:transform .3s;}
.product-card:hover .product-actions{transform:translateY(0);}
.add-cart-btn{flex:1;background:var(--gold);color:var(--black);border:none;
  padding:10px;font-size:.72rem;letter-spacing:1.5px;text-transform:uppercase;
  cursor:pointer;font-family:var(--font-body);transition:background .2s;}
.add-cart-btn:hover{background:var(--gold2);}
.wishlist-btn{background:none;border:1px solid rgba(255,255,255,.3);color:white;
  padding:10px 12px;cursor:pointer;font-size:.9rem;transition:all .2s;}
.wishlist-btn:hover{border-color:var(--gold);color:var(--gold);}
.product-name{font-family:var(--font-display);font-size:1.05rem;font-weight:400;margin-bottom:4px;}
.product-category{font-size:.7rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--gray);margin-bottom:6px;}
.product-price{font-size:.9rem;font-weight:500;}
.product-price .original{text-decoration:line-through;color:var(--gray);margin-right:8px;font-weight:300;}
.product-price .sale-price{color:var(--red);}
.product-stars{font-size:.75rem;color:var(--gold);margin-top:4px;}

/* ===== PRODUCT MODAL ===== */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:800;
  display:flex;align-items:center;justify-content:center;padding:20px;
  opacity:0;pointer-events:none;transition:opacity .3s;}
.modal-overlay.open{opacity:1;pointer-events:all;}
.product-modal{background:white;max-width:900px;width:100%;max-height:90vh;
  overflow-y:auto;border-radius:2px;display:grid;grid-template-columns:1fr 1fr;
  animation:fadeUp .3s ease;}
.modal-img{aspect-ratio:1;overflow:hidden;background:var(--cream);}
.modal-img img{width:100%;height:100%;object-fit:cover;}
.modal-info{padding:48px 40px;overflow-y:auto;}
.modal-category{font-size:.7rem;letter-spacing:2px;text-transform:uppercase;color:var(--gold);margin-bottom:8px;}
.modal-name{font-family:var(--font-display);font-size:2rem;font-weight:300;line-height:1.2;margin-bottom:12px;}
.modal-price{font-size:1.3rem;font-weight:500;margin-bottom:8px;}
.modal-rating{font-size:.8rem;color:var(--gold);margin-bottom:20px;}
.modal-desc{font-size:.85rem;color:var(--gray);line-height:1.7;margin-bottom:24px;}
.size-label{font-size:.7rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--gray);margin-bottom:10px;}
.size-options{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px;}
.size-btn{border:1px solid var(--lgray);background:none;padding:8px 16px;font-size:.8rem;
  cursor:pointer;transition:all .2s;font-family:var(--font-body);}
.size-btn.active,.size-btn:hover{border-color:var(--black);background:var(--black);color:white;}
.qty-row{display:flex;align-items:center;gap:16px;margin-bottom:24px;}
.qty-control{display:flex;align-items:center;border:1px solid var(--lgray);}
.qty-btn{width:36px;height:36px;background:none;border:none;cursor:pointer;font-size:1rem;transition:background .2s;}
.qty-btn:hover{background:var(--cream);}
.qty-num{width:40px;text-align:center;font-size:.9rem;}
.modal-close{position:absolute;top:16px;right:16px;background:none;border:none;
  font-size:1.5rem;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;
  justify-content:center;transition:transform .2s;}
.modal-close:hover{transform:rotate(90deg);}

/* ===== CART DRAWER ===== */
.cart-drawer{position:fixed;right:0;top:0;height:100vh;width:420px;background:white;
  z-index:700;transform:translateX(100%);transition:transform .35s cubic-bezier(.4,0,.2,1);
  display:flex;flex-direction:column;box-shadow:-20px 0 60px rgba(0,0,0,.1);}
.cart-drawer.open{transform:translateX(0);}
.cart-header{padding:28px;border-bottom:1px solid var(--lgray);display:flex;align-items:center;justify-content:space-between;}
.cart-title{font-family:var(--font-display);font-size:1.5rem;font-weight:300;letter-spacing:1px;}
.cart-close{background:none;border:none;font-size:1.4rem;cursor:pointer;transition:transform .2s;}
.cart-close:hover{transform:rotate(90deg);}
.cart-items{flex:1;overflow-y:auto;padding:20px 28px;}
.cart-empty{text-align:center;padding:60px 20px;color:var(--gray);}
.cart-empty-icon{font-size:3rem;margin-bottom:16px;}
.cart-item{display:grid;grid-template-columns:80px 1fr auto;gap:14px;padding:16px 0;border-bottom:1px solid var(--lgray);align-items:start;}
.cart-item img{width:80px;height:100px;object-fit:cover;background:var(--cream);}
.cart-item-info{}
.cart-item-name{font-family:var(--font-display);font-size:1rem;margin-bottom:4px;}
.cart-item-meta{font-size:.72rem;color:var(--gray);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;}
.cart-item-qty{display:flex;align-items:center;gap:10px;font-size:.8rem;}
.cart-qty-btn{background:none;border:1px solid var(--lgray);width:24px;height:24px;
  cursor:pointer;font-size:.8rem;display:flex;align-items:center;justify-content:center;transition:all .2s;}
.cart-qty-btn:hover{background:var(--black);color:white;border-color:var(--black);}
.cart-item-price{font-size:.9rem;font-weight:500;white-space:nowrap;}
.cart-remove{background:none;border:none;color:var(--gray);cursor:pointer;font-size:.7rem;
  letter-spacing:1px;text-transform:uppercase;margin-top:6px;text-decoration:underline;}
.cart-footer{padding:24px 28px;border-top:1px solid var(--lgray);}
.cart-subtotal{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
.cart-subtotal-label{font-size:.75rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--gray);}
.cart-subtotal-val{font-family:var(--font-display);font-size:1.4rem;}
.cart-note{font-size:.72rem;color:var(--gray);margin-bottom:20px;}
.btn-checkout{width:100%;background:var(--black);color:white;border:none;padding:16px;
  font-size:.78rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;
  font-family:var(--font-body);transition:background .3s;margin-bottom:10px;}
.btn-checkout:hover{background:var(--gold);color:var(--black);}
.btn-continue{width:100%;background:none;border:1px solid var(--lgray);color:var(--black);
  padding:13px;font-size:.75rem;letter-spacing:1.5px;text-transform:uppercase;
  cursor:pointer;font-family:var(--font-body);transition:all .2s;}
.btn-continue:hover{border-color:var(--black);}

/* ===== CHECKOUT ===== */
#page-checkout{padding-top:70px;background:var(--cream);min-height:100vh;}
.checkout-layout{max-width:1100px;margin:0 auto;padding:50px 40px;display:grid;
  grid-template-columns:1fr 380px;gap:50px;}
.checkout-left h2{font-family:var(--font-display);font-size:2rem;font-weight:300;margin-bottom:36px;}
.checkout-section{background:white;padding:32px;margin-bottom:20px;border-radius:1px;}
.checkout-section-title{font-size:.75rem;letter-spacing:2px;text-transform:uppercase;
  color:var(--gray);margin-bottom:20px;padding-bottom:12px;border-bottom:1px solid var(--lgray);}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
.checkout-right{}
.order-summary{background:white;padding:32px;border-radius:1px;position:sticky;top:90px;}
.order-summary h3{font-family:var(--font-display);font-size:1.3rem;font-weight:300;margin-bottom:20px;}
.order-item{display:flex;gap:12px;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--lgray);}
.order-item img{width:56px;height:70px;object-fit:cover;background:var(--cream);}
.order-item-info{flex:1;}
.order-item-name{font-size:.85rem;margin-bottom:4px;}
.order-item-meta{font-size:.72rem;color:var(--gray);}
.order-item-price{font-size:.85rem;font-weight:500;}
.order-totals{margin-top:16px;}
.order-row{display:flex;justify-content:space-between;margin-bottom:10px;font-size:.85rem;}
.order-row.total{font-weight:700;font-size:1rem;padding-top:12px;border-top:1px solid var(--lgray);}
.place-order-btn{width:100%;background:var(--black);color:white;border:none;padding:16px;
  font-size:.78rem;letter-spacing:2px;text-transform:uppercase;cursor:pointer;
  font-family:var(--font-body);margin-top:20px;transition:background .3s;}
.place-order-btn:hover{background:var(--gold);color:var(--black);}

/* ===== ORDER SUCCESS ===== */
#page-success{display:flex;align-items:center;justify-content:center;
  min-height:100vh;background:var(--cream);padding-top:70px;}
.success-card{background:white;padding:70px 60px;text-align:center;max-width:500px;width:90%;}
.success-icon{font-size:3rem;margin-bottom:24px;}
.success-title{font-family:var(--font-display);font-size:2.5rem;font-weight:300;margin-bottom:12px;}
.success-sub{color:var(--gray);font-size:.9rem;line-height:1.7;margin-bottom:32px;}
.order-num{background:var(--cream);padding:16px;font-family:var(--font-display);
  font-size:1.2rem;letter-spacing:2px;margin-bottom:32px;}

/* ===== ADMIN ===== */
#page-admin{padding-top:70px;background:#f8f8f8;min-height:100vh;}
.admin-layout{display:grid;grid-template-columns:220px 1fr;min-height:calc(100vh - 70px);}
.admin-sidebar{background:var(--black);padding:30px 0;}
.admin-sidebar-logo{font-family:var(--font-display);font-size:1.3rem;color:var(--gold);
  letter-spacing:4px;padding:0 24px 30px;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:20px;}
.admin-nav-item{display:flex;align-items:center;gap:12px;padding:12px 24px;
  color:rgba(255,255,255,.6);font-size:.8rem;letter-spacing:1px;cursor:pointer;
  transition:all .2s;text-transform:uppercase;}
.admin-nav-item:hover,.admin-nav-item.active{background:rgba(255,255,255,.08);color:var(--gold);}
.admin-nav-item span:first-child{font-size:1rem;}
.admin-content{padding:40px;}
.admin-title{font-family:var(--font-display);font-size:2rem;font-weight:300;margin-bottom:8px;}
.admin-subtitle{color:var(--gray);font-size:.85rem;margin-bottom:36px;}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:40px;}
.stat-card{background:white;padding:28px;border-radius:2px;box-shadow:0 2px 10px rgba(0,0,0,.05);}
.stat-label{font-size:.7rem;letter-spacing:2px;text-transform:uppercase;color:var(--gray);margin-bottom:8px;}
.stat-value{font-family:var(--font-display);font-size:2.2rem;font-weight:300;margin-bottom:4px;}
.stat-change{font-size:.75rem;}
.stat-change.up{color:var(--green);}
.stat-change.down{color:var(--red);}
.admin-section{background:white;border-radius:2px;box-shadow:0 2px 10px rgba(0,0,0,.05);margin-bottom:24px;}
.admin-section-header{padding:20px 28px;border-bottom:1px solid var(--lgray);
  display:flex;align-items:center;justify-content:space-between;}
.admin-section-title{font-size:.75rem;letter-spacing:2px;text-transform:uppercase;font-weight:500;}
.admin-table{width:100%;border-collapse:collapse;}
.admin-table th{font-size:.68rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--gray);
  padding:14px 28px;text-align:left;border-bottom:1px solid var(--lgray);}
.admin-table td{padding:14px 28px;font-size:.85rem;border-bottom:1px solid rgba(0,0,0,.04);}
.admin-table tr:hover td{background:var(--cream);}
.status-badge{padding:4px 10px;border-radius:20px;font-size:.65rem;letter-spacing:1px;text-transform:uppercase;font-weight:500;}
.status-badge.pending{background:#fff3cd;color:#856404;}
.status-badge.shipped{background:#cff4fc;color:#055160;}
.status-badge.delivered{background:#d1e7dd;color:#0a3622;}
.status-badge.cancelled{background:#f8d7da;color:#58151c;}
.product-row-img{width:42px;height:52px;object-fit:cover;border-radius:1px;}
.admin-btn{border:none;padding:7px 16px;font-size:.72rem;letter-spacing:1px;
  text-transform:uppercase;cursor:pointer;font-family:var(--font-body);border-radius:1px;}
.admin-btn.edit{background:var(--black);color:white;}
.admin-btn.del{background:var(--red);color:white;}

/* ===== FOOTER ===== */
.site-footer{background:var(--black);color:rgba(255,255,255,.6);padding:70px 60px 40px;}
.footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:50px;margin-bottom:50px;}
.footer-brand{font-family:var(--font-display);font-size:2rem;color:var(--gold);
  letter-spacing:5px;margin-bottom:16px;}
.footer-desc{font-size:.82rem;line-height:1.8;color:rgba(255,255,255,.4);}
.footer-col-title{font-size:.68rem;letter-spacing:2.5px;text-transform:uppercase;
  color:var(--gold);margin-bottom:18px;}
.footer-links{list-style:none;display:flex;flex-direction:column;gap:10px;}
.footer-links a{color:rgba(255,255,255,.5);font-size:.82rem;text-decoration:none;transition:color .2s;cursor:pointer;}
.footer-links a:hover{color:var(--gold);}
.footer-bottom{border-top:1px solid rgba(255,255,255,.1);padding-top:28px;
  display:flex;justify-content:space-between;align-items:center;font-size:.72rem;}

@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

/* RESPONSIVE */
@media(max-width:900px){
  .auth-split{grid-template-columns:1fr;}
  .auth-visual{display:none;}
  .cat-grid{grid-template-columns:1fr 1fr;}
  .shop-layout{grid-template-columns:1fr;padding:20px;}
  .filter-sidebar{display:none;}
  .products-grid{grid-template-columns:1fr 1fr;}
  .checkout-layout{grid-template-columns:1fr;}
  .stats-grid{grid-template-columns:1fr 1fr;}
  .admin-layout{grid-template-columns:1fr;}
  .admin-sidebar{display:none;}
  .product-modal{grid-template-columns:1fr;}
  .modal-img{max-height:300px;}
  .footer-grid{grid-template-columns:1fr 1fr;}
  .nav-links{display:none;}
  .cart-drawer{width:100%;}
}
</style>
</head>
<body>

<!-- LOADER -->
<div class="loader" id="loader"><div class="loader-text">NOIR</div></div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- NAVBAR -->
<header id="header">
  <div class="nav-inner">
    <div class="nav-logo" onclick="navigate('home')">NOIR</div>
    <ul class="nav-links">
      <li><a onclick="navigate('home')">Home</a></li>
      <li><a onclick="navigate('shop')">Shop</a></li>
      <li><a onclick="navigate('shop')">Collections</a></li>
      <li><a onclick="navigate('shop')">Sale</a></li>
    </ul>
    <div class="nav-icons">
      <span class="nav-icon" onclick="navigate('shop')" title="Search">üîç</span>
      <span class="nav-icon" onclick="toggleCart()" title="Cart" style="position:relative;">
        üõí<span class="cart-badge" id="cart-badge">0</span>
      </span>
      <button class="nav-user-btn" id="nav-user-btn" onclick="handleNavUser()">Sign In</button>
    </div>
  </div>
</header>

<!-- ===== HOME PAGE ===== -->
<div id="page-home" class="page" style="padding-top:0;">
  <div class="hero" onclick="navigate('shop')">
    <div class="hero-bg"></div>
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <div class="hero-eyebrow">New Collection ‚Äî 2025</div>
      <h1 class="hero-title">Dress Your<br><em>Narrative</em></h1>
      <p class="hero-sub">Curated fashion for the bold & the refined</p>
      <div class="hero-btns">
        <button class="btn-gold" onclick="event.stopPropagation();navigate('shop')">Shop Now</button>
        <button class="btn-outline-white" onclick="event.stopPropagation();navigate('shop')">View Collection</button>
      </div>
    </div>
    <div class="hero-scroll"><div class="hero-scroll-line"></div>Scroll</div>
  </div>

  <div class="categories">
    <div class="section-header">
      <div class="section-label">Browse By Category</div>
      <h2 class="section-title">Shop The Collection</h2>
    </div>
    <div class="cat-grid">
      <div class="cat-card" onclick="filterCategory('Women')">
        <img src="https://images.unsplash.com/photo-1581044777550-4cfa60707c03?w=400&q=70" alt="Women">
        <div class="cat-card-overlay"></div>
        <div class="cat-card-label"><h3>Women</h3><span>124 Items</span></div>
      </div>
      <div class="cat-card" onclick="filterCategory('Men')">
        <img src="https://images.unsplash.com/photo-1490578474895-699cd4e2cf59?w=400&q=70" alt="Men">
        <div class="cat-card-overlay"></div>
        <div class="cat-card-label"><h3>Men</h3><span>98 Items</span></div>
      </div>
      <div class="cat-card" onclick="filterCategory('Accessories')">
        <img src="https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&q=70" alt="Accessories">
        <div class="cat-card-overlay"></div>
        <div class="cat-card-label"><h3>Accessories</h3><span>56 Items</span></div>
      </div>
      <div class="cat-card" onclick="filterCategory('Sale')">
        <img src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&q=70" alt="Sale">
        <div class="cat-card-overlay"></div>
        <div class="cat-card-label"><h3>Sale</h3><span>Up to 50% off</span></div>
      </div>
    </div>
  </div>

  <!-- FEATURED -->
  <div style="padding:0 40px 80px;max-width:1400px;margin:0 auto;">
    <div class="section-header">
      <div class="section-label">Featured</div>
      <h2 class="section-title">Best Sellers</h2>
    </div>
    <div class="products-grid" id="featured-products"></div>
  </div>

  <footer class="site-footer">
    <div class="footer-grid">
      <div>
        <div class="footer-brand">NOIR</div>
        <p class="footer-desc">Curated fashion for those who believe style is a form of self-expression. Luxury made accessible.</p>
      </div>
      <div>
        <div class="footer-col-title">Shop</div>
        <ul class="footer-links">
          <li><a onclick="navigate('shop')">Women</a></li>
          <li><a onclick="navigate('shop')">Men</a></li>
          <li><a onclick="navigate('shop')">Accessories</a></li>
          <li><a onclick="navigate('shop')">Sale</a></li>
        </ul>
      </div>
      <div>
        <div class="footer-col-title">Help</div>
        <ul class="footer-links">
          <li><a>Shipping & Returns</a></li>
          <li><a>Size Guide</a></li>
          <li><a>Track Order</a></li>
          <li><a>Contact Us</a></li>
        </ul>
      </div>
      <div>
        <div class="footer-col-title">Company</div>
        <ul class="footer-links">
          <li><a>About NOIR</a></li>
          <li><a>Sustainability</a></li>
          <li><a>Careers</a></li>
          <li><a>Press</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <span>¬© 2025 NOIR Fashion. All rights reserved.</span>
      <span>Privacy ¬∑ Terms ¬∑ Cookies</span>
    </div>
  </footer>
</div>

<!-- ===== AUTH PAGE ===== -->
<div id="page-auth" class="hidden">
  <div class="auth-split">
    <div class="auth-visual">
      <div class="auth-visual-logo">NOIR</div>
      <div class="auth-visual-quote">"Style is a way to say who you are without having to speak."</div>
      <div class="auth-visual-tag">‚Äî Rachel Zoe</div>
    </div>
    <div class="auth-form-side">
      <div class="auth-tabs">
        <button class="auth-tab active" onclick="switchAuthTab('login')">Sign In</button>
        <button class="auth-tab" onclick="switchAuthTab('register')">Create Account</button>
      </div>

      <!-- LOGIN -->
      <div id="auth-login">
        <div class="auth-msg" id="login-err"></div>
        <div class="form-group"><label>Email</label><input type="email" id="l-email" placeholder="your@email.com"></div>
        <div class="form-group"><label>Password</label><input type="password" id="l-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
        <button class="btn-primary" onclick="doLogin()">Sign In</button>
        <p style="font-size:.75rem;color:var(--gray);margin-top:16px;text-align:center;">
          Demo: <strong>demo@noir.com</strong> / <strong>123456</strong>
        </p>
      </div>

      <!-- REGISTER -->
      <div id="auth-register" class="hidden">
        <div class="auth-msg" id="reg-err"></div>
        <div class="auth-msg auth-success" id="reg-ok"></div>
        <div class="form-group"><label>Full Name</label><input type="text" id="r-name" placeholder="Your name"></div>
        <div class="form-group"><label>Email</label><input type="email" id="r-email" placeholder="your@email.com"></div>
        <div class="form-group"><label>Password</label><input type="password" id="r-pass" placeholder="Min 6 characters"></div>
        <div class="form-group"><label>Confirm Password</label><input type="password" id="r-conf" placeholder="Repeat password"></div>
        <button class="btn-primary" onclick="doRegister()">Create Account</button>
      </div>
    </div>
  </div>
</div>

<!-- ===== SHOP PAGE ===== -->
<div id="page-shop" class="hidden page">
  <div class="shop-layout">
    <aside class="filter-sidebar">
      <div class="filter-title">Filters</div>
      <div class="filter-group">
        <div class="filter-group-title">Category</div>
        <div class="filter-options">
          <label class="filter-option"><input type="radio" name="cat" value="" checked onchange="applyFilters()"> All</label>
          <label class="filter-option"><input type="radio" name="cat" value="Women" onchange="applyFilters()"> Women</label>
          <label class="filter-option"><input type="radio" name="cat" value="Men" onchange="applyFilters()"> Men</label>
          <label class="filter-option"><input type="radio" name="cat" value="Accessories" onchange="applyFilters()"> Accessories</label>
          <label class="filter-option"><input type="radio" name="cat" value="Sale" onchange="applyFilters()"> Sale</label>
        </div>
      </div>
      <div class="filter-group">
        <div class="filter-group-title">Price Range (EGP)</div>
        <div class="price-range">
          <input type="number" id="min-price" placeholder="Min" onchange="applyFilters()">
          <input type="number" id="max-price" placeholder="Max" onchange="applyFilters()">
        </div>
      </div>
      <div class="filter-group">
        <div class="filter-group-title">Sort By</div>
        <div class="filter-options">
          <label class="filter-option"><input type="radio" name="sort" value="default" checked onchange="applyFilters()"> Default</label>
          <label class="filter-option"><input type="radio" name="sort" value="price-low" onchange="applyFilters()"> Price: Low to High</label>
          <label class="filter-option"><input type="radio" name="sort" value="price-high" onchange="applyFilters()"> Price: High to Low</label>
          <label class="filter-option"><input type="radio" name="sort" value="rating" onchange="applyFilters()"> Top Rated</label>
        </div>
      </div>
    </aside>
    <main>
      <div class="search-bar">
        <input type="text" id="search-input" placeholder="Search products..." oninput="applyFilters()">
        <button>üîç</button>
      </div>
      <div class="shop-header">
        <div class="shop-count" id="shop-count">Loading...</div>
        <select class="sort-select" onchange="document.querySelector('input[name=sort][value=\'\']');applyFilters()">
          <option value="default">Sort: Default</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
          <option value="rating">Top Rated</option>
        </select>
      </div>
      <div class="products-grid" id="shop-products"></div>
    </main>
  </div>
</div>

<!-- ===== CHECKOUT PAGE ===== -->
<div id="page-checkout" class="hidden page">
  <div class="checkout-layout">
    <div class="checkout-left">
      <h2>Checkout</h2>
      <div class="checkout-section">
        <div class="checkout-section-title">Contact Information</div>
        <div class="form-group"><label>Email</label><input type="email" id="co-email" placeholder="your@email.com"></div>
        <div class="form-group"><label>Phone</label><input type="tel" id="co-phone" placeholder="+20 1XX XXX XXXX"></div>
      </div>
      <div class="checkout-section">
        <div class="checkout-section-title">Shipping Address</div>
        <div class="form-row">
          <div class="form-group"><label>First Name</label><input type="text" id="co-fname" placeholder="Ahmed"></div>
          <div class="form-group"><label>Last Name</label><input type="text" id="co-lname" placeholder="Mohamed"></div>
        </div>
        <div class="form-group"><label>Address</label><input type="text" id="co-addr" placeholder="123 Street, Tanta"></div>
        <div class="form-row">
          <div class="form-group"><label>City</label><input type="text" id="co-city" placeholder="Tanta"></div>
          <div class="form-group"><label>Governorate</label>
            <select id="co-gov">
              <option>Cairo</option><option>Giza</option><option>Alexandria</option>
              <option>Gharbia</option><option>Dakahlia</option><option>Other</option>
            </select>
          </div>
        </div>
      </div>
      <div class="checkout-section">
        <div class="checkout-section-title">Payment</div>
        <div class="filter-options" style="gap:14px;">
          <label class="filter-option"><input type="radio" name="pay" value="cod" checked> Cash on Delivery</label>
          <label class="filter-option"><input type="radio" name="pay" value="card"> Credit / Debit Card</label>
          <label class="filter-option"><input type="radio" name="pay" value="vodafone"> Vodafone Cash</label>
        </div>
      </div>
    </div>
    <div class="checkout-right">
      <div class="order-summary">
        <h3>Order Summary</h3>
        <div id="checkout-items"></div>
        <div class="order-totals" id="checkout-totals"></div>
        <button class="place-order-btn" onclick="placeOrder()">Place Order ‚Üí</button>
        <p style="font-size:.7rem;color:var(--gray);text-align:center;margin-top:12px;">
          üîí Secure & encrypted checkout
        </p>
      </div>
    </div>
  </div>
</div>

<!-- ===== SUCCESS PAGE ===== -->
<div id="page-success" class="hidden page">
  <div class="success-card">
    <div class="success-icon">‚úÖ</div>
    <h2 class="success-title">Order Placed!</h2>
    <p class="success-sub">Thank you for shopping with NOIR. Your order is confirmed and will be shipped within 2-3 business days.</p>
    <div class="order-num" id="order-num">#NOIR-000000</div>
    <button class="btn-primary" onclick="navigate('home')" style="margin-bottom:12px;">Continue Shopping</button>
  </div>
</div>

<!-- ===== ADMIN PAGE ===== -->
<div id="page-admin" class="hidden page">
  <div class="admin-layout">
    <aside class="admin-sidebar">
      <div class="admin-sidebar-logo">NOIR Admin</div>
      <div class="admin-nav-item active" onclick="showAdminTab('dashboard')"><span>üìä</span><span>Dashboard</span></div>
      <div class="admin-nav-item" onclick="showAdminTab('products')"><span>üëó</span><span>Products</span></div>
      <div class="admin-nav-item" onclick="showAdminTab('orders')"><span>üì¶</span><span>Orders</span></div>
      <div class="admin-nav-item" onclick="showAdminTab('customers')"><span>üë•</span><span>Customers</span></div>
      <div class="admin-nav-item" onclick="navigate('home')" style="margin-top:auto;"><span>üè†</span><span>Back to Store</span></div>
    </aside>
    <div class="admin-content">
      <!-- DASHBOARD TAB -->
      <div id="admin-dashboard">
        <div class="admin-title">Dashboard</div>
        <div class="admin-subtitle">Welcome back, Admin. Here's what's happening today.</div>
        <div class="stats-grid">
          <div class="stat-card"><div class="stat-label">Total Revenue</div><div class="stat-value">EGP 84,200</div><div class="stat-change up">‚Üë 12% this month</div></div>
          <div class="stat-card"><div class="stat-label">Orders</div><div class="stat-value">248</div><div class="stat-change up">‚Üë 8% this week</div></div>
          <div class="stat-card"><div class="stat-label">Customers</div><div class="stat-value">1,024</div><div class="stat-change up">‚Üë 24 new today</div></div>
          <div class="stat-card"><div class="stat-label">Products</div><div class="stat-value" id="admin-prod-count">0</div><div class="stat-change">In stock</div></div>
        </div>
        <div class="admin-section">
          <div class="admin-section-header"><span class="admin-section-title">Recent Orders</span></div>
          <table class="admin-table">
            <thead><tr><th>Order #</th><th>Customer</th><th>Items</th><th>Total</th><th>Status</th></tr></thead>
            <tbody id="admin-orders-table"></tbody>
          </table>
        </div>
      </div>
      <!-- PRODUCTS TAB -->
      <div id="admin-products" class="hidden">
        <div class="admin-title">Products</div>
        <div class="admin-subtitle">Manage your inventory</div>
        <div class="admin-section">
          <div class="admin-section-header">
            <span class="admin-section-title">All Products</span>
            <button class="admin-btn edit" onclick="showToastMsg('Add product feature coming soon!')">+ Add Product</button>
          </div>
          <table class="admin-table">
            <thead><tr><th>Image</th><th>Name</th><th>Category</th><th>Price</th><th>Stock</th><th>Actions</th></tr></thead>
            <tbody id="admin-products-table"></tbody>
          </table>
        </div>
      </div>
      <!-- ORDERS TAB -->
      <div id="admin-orders" class="hidden">
        <div class="admin-title">Orders</div>
        <div class="admin-subtitle">Track and manage all orders</div>
        <div class="admin-section">
          <div class="admin-section-header"><span class="admin-section-title">All Orders</span></div>
          <table class="admin-table">
            <thead><tr><th>Order #</th><th>Customer</th><th>Date</th><th>Total</th><th>Status</th><th>Action</th></tr></thead>
            <tbody id="admin-all-orders-table"></tbody>
          </table>
        </div>
      </div>
      <!-- CUSTOMERS TAB -->
      <div id="admin-customers" class="hidden">
        <div class="admin-title">Customers</div>
        <div class="admin-subtitle">Registered users</div>
        <div class="admin-section">
          <div class="admin-section-header"><span class="admin-section-title">All Customers</span></div>
          <table class="admin-table">
            <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Joined</th></tr></thead>
            <tbody id="admin-customers-table"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- PRODUCT MODAL -->
<div class="modal-overlay" id="product-modal" onclick="closeModal(event)">
  <div style="position:relative;max-width:900px;width:90%;">
    <button class="modal-close" onclick="closeProductModal()" style="position:absolute;top:-12px;right:-12px;background:white;border-radius:50%;width:36px;height:36px;z-index:10;border:none;font-size:1.2rem;cursor:pointer;box-shadow:0 2px 10px rgba(0,0,0,.2);">‚úï</button>
    <div class="product-modal" id="modal-content"></div>
  </div>
</div>

<!-- CART DRAWER -->
<div id="cart-drawer" class="cart-drawer">
  <div class="cart-header">
    <div class="cart-title">Shopping Bag</div>
    <button class="cart-close" onclick="toggleCart()">‚úï</button>
  </div>
  <div class="cart-items" id="cart-items"></div>
  <div class="cart-footer" id="cart-footer"></div>
</div>
<div id="cart-overlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:699;" onclick="toggleCart()"></div>

<script>
// ===== DATA =====
const PRODUCTS = [
  {id:1,name:"Silk Wrap Dress",category:"Women",price:1850,originalPrice:null,img:"https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=400&q=70",badge:"New",rating:4.8,reviews:124,desc:"Elegant silk wrap dress with a flattering silhouette. Perfect for both casual and formal occasions.",sizes:["XS","S","M","L","XL"],stock:15},
  {id:2,name:"Tailored Blazer",category:"Women",price:2400,originalPrice:3200,img:"https://images.unsplash.com/photo-1594938298603-c8148c4b4fb3?w=400&q=70",badge:"Sale",rating:4.6,reviews:89,desc:"Classic tailored blazer in premium fabric. A wardrobe staple that transitions from day to night.",sizes:["XS","S","M","L"],stock:8},
  {id:3,name:"Linen Trousers",category:"Men",price:1200,originalPrice:null,img:"https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=400&q=70",badge:null,rating:4.5,reviews:67,desc:"Breathable linen trousers with a relaxed fit. Ideal for warm weather styling.",sizes:["S","M","L","XL","XXL"],stock:20},
  {id:4,name:"Cashmere Sweater",category:"Men",price:3200,originalPrice:null,img:"https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400&q=70",badge:"New",rating:4.9,reviews:156,desc:"Pure cashmere sweater with a luxurious feel. Available in multiple colors.",sizes:["S","M","L","XL"],stock:12},
  {id:5,name:"Leather Tote Bag",category:"Accessories",price:2800,originalPrice:null,img:"https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&q=70",badge:null,rating:4.7,reviews:203,desc:"Genuine leather tote bag with multiple compartments. Durable and stylish.",sizes:["One Size"],stock:30},
  {id:6,name:"Summer Maxi Dress",category:"Sale",price:890,originalPrice:1780,img:"https://images.unsplash.com/photo-1496747611176-843222e1e57c?w=400&q=70",badge:"Sale",rating:4.4,reviews:78,desc:"Flowy maxi dress perfect for summer. Light fabric with beautiful print.",sizes:["XS","S","M","L","XL"],stock:5},
  {id:7,name:"Oxford Button Shirt",category:"Men",price:980,originalPrice:null,img:"https://images.unsplash.com/photo-1602810318383-e386cc2a3ccf?w=400&q=70",badge:null,rating:4.3,reviews:92,desc:"Classic oxford button-down shirt. Versatile piece for any wardrobe.",sizes:["S","M","L","XL","XXL"],stock:25},
  {id:8,name:"Silk Scarf",category:"Accessories",price:650,originalPrice:null,img:"https://images.unsplash.com/photo-1601924994987-69e26d50dc26?w=400&q=70",badge:"New",rating:4.6,reviews:45,desc:"Hand-printed silk scarf with intricate pattern. Can be worn multiple ways.",sizes:["One Size"],stock:40},
  {id:9,name:"Denim Jacket",category:"Women",price:1650,originalPrice:2200,img:"https://images.unsplash.com/photo-1551537482-f2075a1d41f2?w=400&q=70",badge:"Sale",rating:4.5,reviews:134,desc:"Classic denim jacket with modern cut. A timeless piece for every season.",sizes:["XS","S","M","L"],stock:10},
  {id:10,name:"Slim Fit Chinos",category:"Men",price:1100,originalPrice:null,img:"https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?w=400&q=70",badge:null,rating:4.4,reviews:88,desc:"Slim fit chinos in stretch fabric for ultimate comfort and style.",sizes:["28","30","32","34","36"],stock:18},
  {id:11,name:"Gold Hoop Earrings",category:"Accessories",price:450,originalPrice:null,img:"https://images.unsplash.com/photo-1603974372039-adc49044b6bd?w=400&q=70",badge:null,rating:4.8,reviews:312,desc:"18k gold-plated hoop earrings. Lightweight and perfect for everyday wear.",sizes:["One Size"],stock:50},
  {id:12,name:"Floral Midi Dress",category:"Sale",price:720,originalPrice:1440,img:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&q=70",badge:"Sale",rating:4.2,reviews:56,desc:"Beautiful floral print midi dress with adjustable tie waist.",sizes:["XS","S","M","L"],stock:7},
];

const DEMO_ORDERS = [
  {id:"NOIR-001247",customer:"Sara Ahmed",items:3,total:5450,status:"delivered",date:"2025-02-15"},
  {id:"NOIR-001246",customer:"Omar Hassan",items:1,total:1850,status:"shipped",date:"2025-02-16"},
  {id:"NOIR-001245",customer:"Layla Mohamed",items:2,total:3650,status:"pending",date:"2025-02-17"},
  {id:"NOIR-001244",customer:"Ahmed Ali",items:4,total:7200,status:"delivered",date:"2025-02-14"},
  {id:"NOIR-001243",customer:"Nour Ibrahim",items:1,total:2800,status:"cancelled",date:"2025-02-13"},
];

// ===== STATE =====
let cart = JSON.parse(localStorage.getItem('noir_cart') || '[]');
let users = JSON.parse(localStorage.getItem('noir_users') || '[]');
let currentUser = JSON.parse(localStorage.getItem('noir_user') || 'null');
let selectedSize = '';
let selectedProduct = null;
let currentPage = 'home';

// Demo user
if (!users.find(u => u.email === 'demo@noir.com')) {
  users.push({name:'Demo User',email:'demo@noir.com',password:'123456',role:'user',joined:'2025-01-01'});
}
if (!users.find(u => u.email === 'admin@noir.com')) {
  users.push({name:'Admin',email:'admin@noir.com',password:'admin123',role:'admin',joined:'2024-01-01'});
}
saveUsers();

function saveUsers(){ localStorage.setItem('noir_users', JSON.stringify(users)); }
function saveCart(){ localStorage.setItem('noir_cart', JSON.stringify(cart)); updateCartBadge(); }
function saveUser(){ localStorage.setItem('noir_user', JSON.stringify(currentUser)); }

// ===== NAVIGATION =====
const pages = ['home','auth','shop','checkout','success','admin'];
function navigate(page) {
  pages.forEach(p => document.getElementById('page-'+p).classList.add('hidden'));
  document.getElementById('page-'+page).classList.remove('hidden');
  currentPage = page;
  window.scrollTo(0,0);
  if (page === 'home') {
    document.getElementById('header').classList.remove('dark');
    renderFeatured();
  } else if (page === 'shop') {
    document.getElementById('header').classList.add('dark');
    applyFilters();
  } else if (page === 'checkout') {
    document.getElementById('header').classList.add('dark');
    renderCheckout();
    if (currentUser) document.getElementById('co-email').value = currentUser.email;
  } else if (page === 'admin') {
    document.getElementById('header').classList.add('dark');
    renderAdmin();
  } else {
    document.getElementById('header').classList.remove('dark');
  }
  updateNavUser();
}

function filterCategory(cat) {
  navigate('shop');
  setTimeout(() => {
    document.querySelectorAll('input[name=cat]').forEach(r => r.value === cat ? r.checked = true : null);
    applyFilters();
  }, 100);
}

// ===== AUTH =====
function switchAuthTab(tab) {
  document.querySelectorAll('.auth-tab').forEach((t,i) => t.classList.toggle('active', (i===0&&tab==='login')||(i===1&&tab==='register')));
  document.getElementById('auth-login').classList.toggle('hidden', tab !== 'login');
  document.getElementById('auth-register').classList.toggle('hidden', tab !== 'register');
}

function handleNavUser() {
  if (currentUser) {
    if (currentUser.role === 'admin') navigate('admin');
    else { currentUser = null; localStorage.removeItem('noir_user'); updateNavUser(); showToastMsg('Signed out.'); }
  } else navigate('auth');
}

function doLogin() {
  const email = document.getElementById('l-email').value.trim();
  const pass = document.getElementById('l-pass').value;
  const err = document.getElementById('login-err');
  const user = users.find(u => u.email === email && u.password === pass);
  if (!user) { err.textContent = 'Incorrect email or password.'; err.classList.add('show'); return; }
  err.classList.remove('show');
  currentUser = user; saveUser(); updateNavUser();
  showToastMsg(`Welcome back, ${user.name}! üëã`);
  if (user.role === 'admin') navigate('admin'); else navigate('home');
}

function doRegister() {
  const name = document.getElementById('r-name').value.trim();
  const email = document.getElementById('r-email').value.trim();
  const pass = document.getElementById('r-pass').value;
  const conf = document.getElementById('r-conf').value;
  const err = document.getElementById('reg-err');
  const ok = document.getElementById('reg-ok');
  err.classList.remove('show'); ok.classList.remove('show');
  if (!name||!email||!pass) { err.textContent='Fill all fields.'; err.classList.add('show'); return; }
  if (pass.length < 6) { err.textContent='Password min 6 characters.'; err.classList.add('show'); return; }
  if (pass !== conf) { err.textContent='Passwords do not match.'; err.classList.add('show'); return; }
  if (users.find(u => u.email === email)) { err.textContent='Email already registered.'; err.classList.add('show'); return; }
  const newUser = {name,email,password:pass,role:'user',joined:new Date().toISOString().split('T')[0]};
  users.push(newUser); saveUsers(); currentUser = newUser; saveUser();
  ok.textContent = `Account created! Welcome, ${name}!`; ok.classList.add('show');
  setTimeout(() => { updateNavUser(); navigate('home'); showToastMsg(`Welcome to NOIR, ${name}! üéâ`); }, 1200);
}

function updateNavUser() {
  const btn = document.getElementById('nav-user-btn');
  if (currentUser) btn.textContent = currentUser.role === 'admin' ? '‚öô Admin' : currentUser.name.split(' ')[0];
  else btn.textContent = 'Sign In';
}

// ===== PRODUCTS =====
function renderProducts(products, containerId) {
  const el = document.getElementById(containerId);
  if (!products.length) { el.innerHTML = '<p style="color:var(--gray);padding:40px 0;">No products found.</p>'; return; }
  el.innerHTML = products.map(p => `
    <div class="product-card" onclick="openProduct(${p.id})">
      <div class="product-img-wrap">
        <img src="${p.img}" alt="${p.name}" loading="lazy">
        ${p.badge ? `<div class="product-badge ${p.badge.toLowerCase()}">${p.badge}</div>` : ''}
        <div class="product-actions" onclick="event.stopPropagation()">
          <button class="add-cart-btn" onclick="quickAdd(${p.id})">Add to Bag</button>
          <button class="wishlist-btn">‚ô°</button>
        </div>
      </div>
      <div class="product-category">${p.category}</div>
      <div class="product-name">${p.name}</div>
      <div class="product-price">
        ${p.originalPrice ? `<span class="original">EGP ${p.originalPrice.toLocaleString()}</span><span class="sale-price">EGP ${p.price.toLocaleString()}</span>` : `EGP ${p.price.toLocaleString()}`}
      </div>
      <div class="product-stars">${'‚òÖ'.repeat(Math.floor(p.rating))}${'‚òÜ'.repeat(5-Math.floor(p.rating))} <span style="color:var(--gray)">(${p.reviews})</span></div>
    </div>`).join('');
}

function renderFeatured() {
  renderProducts(PRODUCTS.slice(0,6), 'featured-products');
  document.getElementById('admin-prod-count').textContent = PRODUCTS.length;
}

function applyFilters() {
  const search = document.getElementById('search-input')?.value.toLowerCase() || '';
  const cat = document.querySelector('input[name=cat]:checked')?.value || '';
  const minP = parseFloat(document.getElementById('min-price')?.value) || 0;
  const maxP = parseFloat(document.getElementById('max-price')?.value) || Infinity;
  const sort = document.querySelector('input[name=sort]:checked')?.value || 'default';

  let filtered = PRODUCTS.filter(p => {
    const matchSearch = p.name.toLowerCase().includes(search) || p.category.toLowerCase().includes(search);
    const matchCat = !cat || p.category === cat;
    const matchPrice = p.price >= minP && p.price <= maxP;
    return matchSearch && matchCat && matchPrice;
  });

  if (sort === 'price-low') filtered.sort((a,b) => a.price - b.price);
  else if (sort === 'price-high') filtered.sort((a,b) => b.price - a.price);
  else if (sort === 'rating') filtered.sort((a,b) => b.rating - a.rating);

  document.getElementById('shop-count').textContent = `${filtered.length} product${filtered.length !== 1 ? 's' : ''} found`;
  renderProducts(filtered, 'shop-products');
}

// ===== PRODUCT MODAL =====
function openProduct(id) {
  selectedProduct = PRODUCTS.find(p => p.id === id);
  if (!selectedProduct) return;
  selectedSize = selectedProduct.sizes[0];
  const modal = document.getElementById('modal-content');
  modal.innerHTML = `
    <div class="modal-img"><img src="${selectedProduct.img}" alt="${selectedProduct.name}"></div>
    <div class="modal-info">
      <div class="modal-category">${selectedProduct.category}</div>
      <div class="modal-name">${selectedProduct.name}</div>
      <div class="modal-price">
        ${selectedProduct.originalPrice ? `<span style="text-decoration:line-through;color:var(--gray);font-size:1rem;margin-right:8px;">EGP ${selectedProduct.originalPrice.toLocaleString()}</span>` : ''}
        EGP ${selectedProduct.price.toLocaleString()}
      </div>
      <div class="modal-rating">${'‚òÖ'.repeat(Math.floor(selectedProduct.rating))} ${selectedProduct.rating} ¬∑ ${selectedProduct.reviews} reviews</div>
      <p class="modal-desc">${selectedProduct.desc}</p>
      <div class="size-label">Size ‚Äî <span id="selected-size-label">${selectedSize}</span></div>
      <div class="size-options">${selectedProduct.sizes.map(s => `<button class="size-btn${s===selectedSize?' active':''}" onclick="selectSize('${s}',this)">${s}</button>`).join('')}</div>
      <div class="qty-row">
        <div class="qty-control">
          <button class="qty-btn" onclick="changeQty(-1)">‚àí</button>
          <div class="qty-num" id="modal-qty">1</div>
          <button class="qty-btn" onclick="changeQty(1)">+</button>
        </div>
        <span style="font-size:.75rem;color:var(--gray);">${selectedProduct.stock} in stock</span>
      </div>
      <button class="btn-primary" onclick="addToCartFromModal()">Add to Bag</button>
      <button style="width:100%;background:none;border:1px solid var(--lgray);padding:14px;margin-top:10px;cursor:pointer;font-family:var(--font-body);font-size:.78rem;letter-spacing:1.5px;text-transform:uppercase;transition:all .2s;" onmouseover="this.style.borderColor='var(--black)'" onmouseout="this.style.borderColor='var(--lgray)'">‚ô° Add to Wishlist</button>
    </div>`;
  document.getElementById('product-modal').classList.add('open');
}

function selectSize(s, btn) {
  selectedSize = s;
  document.getElementById('selected-size-label').textContent = s;
  document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}

let modalQty = 1;
function changeQty(d) {
  modalQty = Math.max(1, Math.min(selectedProduct?.stock||10, modalQty + d));
  document.getElementById('modal-qty').textContent = modalQty;
}

function addToCartFromModal() {
  if (!selectedProduct) return;
  addToCart(selectedProduct.id, selectedSize, modalQty);
  closeProductModal();
}

function closeProductModal() {
  document.getElementById('product-modal').classList.remove('open');
  modalQty = 1;
}

function closeModal(e) {
  if (e.target === document.getElementById('product-modal')) closeProductModal();
}

function quickAdd(id) {
  const p = PRODUCTS.find(x => x.id === id);
  addToCart(id, p.sizes[0], 1);
}

// ===== CART =====
function addToCart(id, size, qty = 1) {
  const p = PRODUCTS.find(x => x.id === id);
  const key = `${id}-${size}`;
  const existing = cart.find(i => i.key === key);
  if (existing) existing.qty += qty;
  else cart.push({key, id, name:p.name, price:p.price, img:p.img, category:p.category, size, qty});
  saveCart(); renderCart();
  showToastMsg(`${p.name} added to bag üõç`);
}

function removeFromCart(key) {
  cart = cart.filter(i => i.key !== key);
  saveCart(); renderCart();
}

function changeCartQty(key, d) {
  const item = cart.find(i => i.key === key);
  if (!item) return;
  item.qty = Math.max(1, item.qty + d);
  saveCart(); renderCart();
}

function getCartTotal() { return cart.reduce((s,i) => s + i.price * i.qty, 0); }
function getCartCount() { return cart.reduce((s,i) => s + i.qty, 0); }

function updateCartBadge() {
  document.getElementById('cart-badge').textContent = getCartCount();
}

function renderCart() {
  const el = document.getElementById('cart-items');
  const footer = document.getElementById('cart-footer');
  if (!cart.length) {
    el.innerHTML = `<div class="cart-empty"><div class="cart-empty-icon">üõç</div><p style="font-family:var(--font-display);font-size:1.2rem;margin-bottom:8px;">Your bag is empty</p><p style="font-size:.82rem;color:var(--gray);">Add items to get started</p></div>`;
    footer.innerHTML = `<button class="btn-continue" onclick="toggleCart();navigate('shop')">Start Shopping</button>`;
    return;
  }
  el.innerHTML = cart.map(i => `
    <div class="cart-item">
      <img src="${i.img}" alt="${i.name}">
      <div class="cart-item-info">
        <div class="cart-item-name">${i.name}</div>
        <div class="cart-item-meta">${i.category} ¬∑ Size: ${i.size}</div>
        <div class="cart-item-qty">
          <button class="cart-qty-btn" onclick="changeCartQty('${i.key}',-1)">‚àí</button>
          <span>${i.qty}</span>
          <button class="cart-qty-btn" onclick="changeCartQty('${i.key}',1)">+</button>
        </div>
        <button class="cart-remove" onclick="removeFromCart('${i.key}')">Remove</button>
      </div>
      <div class="cart-item-price">EGP ${(i.price*i.qty).toLocaleString()}</div>
    </div>`).join('');

  const shipping = getCartTotal() >= 2000 ? 0 : 100;
  footer.innerHTML = `
    <div class="cart-subtotal"><span class="cart-subtotal-label">Subtotal</span><span class="cart-subtotal-val">EGP ${getCartTotal().toLocaleString()}</span></div>
    <p class="cart-note">${shipping === 0 ? '‚úÖ Free shipping applied' : `Add EGP ${(2000-getCartTotal()).toLocaleString()} more for free shipping`}</p>
    <button class="btn-checkout" onclick="toggleCart();navigate('checkout')">Checkout ‚Üí</button>
    <button class="btn-continue" onclick="toggleCart()">Continue Shopping</button>`;
}

function toggleCart() {
  const drawer = document.getElementById('cart-drawer');
  const overlay = document.getElementById('cart-overlay');
  const isOpen = drawer.classList.contains('open');
  drawer.classList.toggle('open');
  overlay.style.display = isOpen ? 'none' : 'block';
  if (!isOpen) renderCart();
}

// ===== CHECKOUT =====
function renderCheckout() {
  if (!cart.length) { navigate('shop'); return; }
  const shipping = getCartTotal() >= 2000 ? 0 : 100;
  document.getElementById('checkout-items').innerHTML = cart.map(i => `
    <div class="order-item">
      <img src="${i.img}" alt="${i.name}">
      <div class="order-item-info">
        <div class="order-item-name">${i.name}</div>
        <div class="order-item-meta">Size: ${i.size} ¬∑ Qty: ${i.qty}</div>
      </div>
      <div class="order-item-price">EGP ${(i.price*i.qty).toLocaleString()}</div>
    </div>`).join('');
  document.getElementById('checkout-totals').innerHTML = `
    <div class="order-row"><span>Subtotal</span><span>EGP ${getCartTotal().toLocaleString()}</span></div>
    <div class="order-row"><span>Shipping</span><span>${shipping === 0 ? 'Free' : 'EGP '+shipping}</span></div>
    <div class="order-row total"><span>Total</span><span>EGP ${(getCartTotal()+shipping).toLocaleString()}</span></div>`;
}

function placeOrder() {
  const fname = document.getElementById('co-fname').value;
  const addr = document.getElementById('co-addr').value;
  if (!fname || !addr) { showToastMsg('Please fill shipping details.'); return; }
  const orderNum = 'NOIR-' + Math.floor(Math.random()*900000+100000);
  document.getElementById('order-num').textContent = '#' + orderNum;
  cart = []; saveCart();
  navigate('success');
}

// ===== ADMIN =====
function showAdminTab(tab) {
  ['dashboard','products','orders','customers'].forEach(t => document.getElementById('admin-'+t).classList.add('hidden'));
  document.getElementById('admin-'+tab).classList.remove('hidden');
  document.querySelectorAll('.admin-nav-item').forEach((el,i) => el.classList.toggle('active', ['dashboard','products','orders','customers'][i] === tab));
}

function renderAdmin() {
  document.getElementById('admin-prod-count').textContent = PRODUCTS.length;

  // Recent orders
  document.getElementById('admin-orders-table').innerHTML = DEMO_ORDERS.slice(0,5).map(o => `
    <tr><td>${o.id}</td><td>${o.customer}</td><td>${o.items}</td>
    <td>EGP ${o.total.toLocaleString()}</td>
    <td><span class="status-badge ${o.status}">${o.status}</span></td></tr>`).join('');

  // Products table
  document.getElementById('admin-products-table').innerHTML = PRODUCTS.map(p => `
    <tr><td><img src="${p.img}" class="product-row-img" alt="${p.name}"></td>
    <td>${p.name}</td><td>${p.category}</td><td>EGP ${p.price.toLocaleString()}</td>
    <td>${p.stock}</td>
    <td style="display:flex;gap:6px;padding:14px 28px;">
      <button class="admin-btn edit" onclick="showToastMsg('Edit coming soon!')">Edit</button>
      <button class="admin-btn del" onclick="showToastMsg('Delete coming soon!')">Del</button>
    </td></tr>`).join('');

  // All orders
  document.getElementById('admin-all-orders-table').innerHTML = DEMO_ORDERS.map(o => `
    <tr><td>${o.id}</td><td>${o.customer}</td><td>${o.date}</td>
    <td>EGP ${o.total.toLocaleString()}</td>
    <td><span class="status-badge ${o.status}">${o.status}</span></td>
    <td><button class="admin-btn edit" onclick="showToastMsg('View order')">View</button></td></tr>`).join('');

  // Customers
  document.getElementById('admin-customers-table').innerHTML = users.map(u => `
    <tr><td>${u.name}</td><td>${u.email}</td>
    <td><span class="status-badge ${u.role==='admin'?'shipped':'delivered'}">${u.role}</span></td>
    <td>${u.joined}</td></tr>`).join('');
}

// ===== TOAST =====
function showToastMsg(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// ===== INIT =====
window.addEventListener('scroll', () => {
  if (currentPage === 'home') {
    document.getElementById('header').classList.toggle('dark', window.scrollY > window.innerHeight * 0.8);
  }
});

document.addEventListener('keydown', e => {
  if (e.key === 'Escape') { closeProductModal(); if (document.getElementById('cart-drawer').classList.contains('open')) toggleCart(); }
  if (e.key === 'Enter') {
    if (!document.getElementById('auth-login').classList.contains('hidden') && currentPage === 'auth') doLogin();
  }
});

// INIT
setTimeout(() => {
  document.getElementById('loader').classList.add('gone');
  navigate('home');
  updateNavUser();
  updateCartBadge();
}, 1500);
</script>
</body>
</html>
